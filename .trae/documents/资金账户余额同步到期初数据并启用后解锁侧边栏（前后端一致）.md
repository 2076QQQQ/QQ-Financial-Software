## 问题

1. 停用的子科目仍出现在资金账户的“关联会计科目”下拉中：因为会计科目编辑仅更新了前端状态，未持久化到后端；资金账户页从后端加载科目，导致下拉仍显示启用状态。
2. 在资金账户输入“招商银行存款 500”，期初数据页未显示：因为期初页仅按 `relatedSubjectCode === '1002'/'1001'` 精确匹配父科目，未包含子科目编码（如 `100201`），导致汇总与虚拟来源行都忽略子科目。

## 方案

* 后端增加科目更新接口：`PUT /api/settings/subjects`，可更新 `isActive` 等字段；删除接口已存在。

* 前端会计科目页：编辑保存时调用 `updateSubject`（PUT）并刷新 `getSubjects()`；这样停用状态持久化后，资金账户页下拉不再显示停用科目。

* 期初数据页：所有资金账户同步逻辑改为“startsWith”匹配父科目

  * 初始合计：`relatedSubjectCode.startsWith('1001')` / `'1002'`

  * 虚拟子行：同样按 `startsWith` 过滤，确保子科目编码也被统计到。

## 涉及文件

* `backend/server.ts`：新增 `PUT /api/settings/subjects`

* `frontend/lib/api/auth.ts`：新增 `updateSubject(payload)` 方法

* `frontend/pages/settings/SubjectManagement.tsx`：编辑保存调用后端更新并刷新列表

* `frontend/pages/setup/InitialDataEntry.tsx`：将资金账户的父科目汇总与虚拟子行过滤改为 `startsWith` 匹配

## 验证

* 在会计科目里将某子科目停用 → 资金账户下拉不再显示该科目。

* 在资金账户新增“招商银行存款 500” → 期初数据页资产类父科目显示合计，并在展开时显示该账户的来源行。

