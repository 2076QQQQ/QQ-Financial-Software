## 问题定位
- 点击删除时报错：`setMockSubjects is not defined`。原因是科目页已改为走后端，但删除处理仍调用了本地 mock 更新函数。
- 当前后端没有删除科目的接口，导致即使前端移除，本次刷新后也会恢复。

## 修复方案
1. 前端修复
- 文件：`frontend/pages/settings/SubjectManagement.tsx`
- 在 `handleDelete` 中移除对 `setMockSubjects` 的调用，改为调用后端删除接口并刷新列表：
  - 新增 API：`deleteSubject(id)`；删除成功后 `getSubjects()` 刷新。

2. 后端持久化删除
- 文件：`backend/server.ts`
- 新增 `DELETE /api/settings/subjects?id=...`：
  - 根据 `companyId` 和 `id` 查找科目
  - 校验不可删除条件（有子科目或 `hasBalance` 为真）
  - 删除并写回
- 同时改进 `POST /api/settings/subjects`：
  - 新建科目默认 `isBuiltIn=false, hasBalance=false, hasChildren=false`
  - 若存在父科目，设置父科目的 `hasChildren=true`

3. 前端 API 封装
- 文件：`frontend/lib/api/auth.ts`
- 添加 `deleteSubject(id)` 方法，调用上述后端接口。

## 验证
- 在会计科目页对非内置、无余额、无子科目的科目点击删除，弹确认后成功删除并刷新不再出现。
- 对有子科目或 `isBuiltIn` 的科目删除按钮禁用；若后端拦截也返回错误信息。

## 变更文件
- `frontend/pages/settings/SubjectManagement.tsx`
- `frontend/lib/api/auth.ts`
- `backend/server.ts`

请确认，我将按照以上方案修复并验证删除功能。